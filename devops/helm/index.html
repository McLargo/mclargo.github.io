<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Javier Gil">
    <link rel="canonical" href="https://mclargo.github.io/devops/helm/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Helm Charts - My technical wiki</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../assets/css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Helm", url: "#_top", children: [
              {title: "Helm charts", url: "#helm-charts" },
              {title: "Templates", url: "#templates" },
              {title: "Templates functions", url: "#templates-functions" },
              {title: "References", url: "#references" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../k8s/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../k8s/" class="btn btn-xs btn-link">
        Kubernetes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../features-toggles/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../features-toggles/" class="btn btn-xs btn-link">
        Features Toggles
      </a>
    </div>
    
  </div>

    

    <h1 id="helm">Helm</h1>
<p>K8s packaging is a virtual concept. When we have several objects related to the
same service, we can group them together in a single package. But there is no
object in k8s for that. <strong>Helm</strong> manages a group of resources in a single unit.
This is called a <strong>chart</strong>, which contains all the object required in the unit
to make an application or service to work.</p>
<h2 id="helm-charts">Helm charts</h2>
<p>Once a chart is created, a new folder is created with all the files required for
helm to work. This folder is called <strong>chart</strong>. Explanation of the files:</p>
<ul>
<li>Chart.yaml: contains the metadata for the chart.</li>
<li>values.yaml: set of properties that can be used to configure the chart. This
  contains the default values.</li>
<li>charts folder: a Chart can depend on another Chart. If this happens, chart
  files will be inside this folder.</li>
<li>templates folder: contains the templates for the resources that will be
  created. Is where helm find the templates for all the k8s objects required for
  your application. May some files are autogenerated by default. If you have
  predefined k8s files, you can delete them and place your own k8s manifest in a
  folder called <code>k8s</code>. Usually, some tweaks to the files are required. For
  example, the name of the service, default values...</li>
<li>templates/NOTES.txt: contains the information that will be shown when the
  chart is installed.</li>
</ul>
<h2 id="templates">Templates</h2>
<p>A template is an intermediate file that will be used to generate the final k8s
file. Representation is with <code>{{ }}</code>. For example,
<code>{{ .Values.image.repository }}</code> will check in the <code>values.yaml</code> file, <code>image</code>
object, and the value of key <code>repository</code>. In case <code>--set</code> is used, it will
override the value in the <code>values.yaml</code> file.</p>
<p>Another objects are available to be used in the templates aside from <code>.Values</code>.
<code>Release</code> (corresponding to the release data) and <code>Chart</code> (corresponding to the
chart metadata).</p>
<p>Update a chart template will require an update of the version in <code>charts.yaml</code>.</p>
<p>Inside file <code>_helpers.tpl</code> there are some functions to be used in the templates.
Use with <code>{{ template "name" . }}</code>. The dot is the context. You can also define
your custom functions.</p>
<p><code>templates/NOTES.txt</code> can also use templates related to the service, such as
how to access the service or see secrets generated by helm.</p>
<h2 id="templates-functions">Templates functions</h2>
<ul>
<li>range: is used to iterate over a list. Once we are inside the loop, context is
  modify with the entity we are iterated for.</li>
<li>default: in case the value is not provider or empty string, use the other
  value provided.</li>
<li>printf: to concatenate strings.</li>
<li>quote: quote a string.</li>
<li>pipeline functions like in bash.</li>
<li>if/else statements are available.</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><a href="https://gist.github.com/McLargo/ae633d1ff481c20c21433074169d283c#file-helm-md">Helm command cheatsheet</a></li>
<li><a href="https://helm.sh/docs/chart_best_practices/">Helm best practices</a></li>
<li><a href="https://github.com/komodorio/helm-dashboard">Helm dashboard</a></li>
<li><a href="https://kube.academy/courses/helm-101">Helm 101</a></li>
<li><a href="https://helm.sh/docs/chart_template_guide/functions_and_pipelines/">Helm functions</a></li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../k8s/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../k8s/" class="btn btn-xs btn-link">
        Kubernetes
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../features-toggles/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../features-toggles/" class="btn btn-xs btn-link">
        Features Toggles
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content"><p>Copyright &copy; 2025 <a href="https://github.com/McLargo">Javier Gil</a>.</p>
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>