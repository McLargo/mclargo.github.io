<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Javier Gil" /><link rel="canonical" href="https://mclargo.github.io/architecture/patterns/state-pattern/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>State Pattern - My technical wiki</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "State Pattern";
        var mkdocs_page_input_path = "architecture/patterns/state-pattern.md";
        var mkdocs_page_url = "/architecture/patterns/state-pattern/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> My technical wiki
        </a>
        <div class="version">
          2025.06
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture-decision-record/">Architecture Decision Records</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Communication</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/abs/">Adaptive Bitrate Streaming</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/asynchronous-messaging/">Asynchronous Messaging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/graphql/">Graphql</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/grpc/">gRPC</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/rest/">REST</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/webhooks/">Webhooks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../communication/websocket/">Websocket</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Microservices</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/microservices/">101 Microservices</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/aggregator/">Aggregator Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/anti-corruption-layer/">Anti-Corruption Layer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/api-gateway/">API Gateway</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/bff/">Backend For Frontend</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/bulkhead/">Bulkhead Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/circuit-breaker/">Circuit Breaker Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/cqrs/">Command Query Responsibility Segregation Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/database-per-service/">Database Per Microservice Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/distributed-transaction-patterns/">Distributed Transactions Patterns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/event-driven/">Event Driven</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/saga-pattern/">Saga Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/service-mesh/">Service Mesh</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/sidecar/">Sidecar Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../microservices/strangler-fig/">Strangler Fig Pattern</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Patterns</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../concurrency-patterns/">Concurrency patterns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../data-storage/">Data Storage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../database-patterns/">Database Patterns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../domain-driven/">Domain Driven Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../design-patterns/">Design Patterns</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../hexagonal-architecture/">Hexagonal Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../monolithic/">Monolithic Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../retry-mechanism/">Retry Mechanism</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../solid/">Solid Principles</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">State Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../vertical-slice/">Vertical Slice</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DevOps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/continuous-integration/">Continuous Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/deployment-strategies/">Deployment Strategies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/docker/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/features-toggles/">Features Toggles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/helm/">Helm Charts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/k8s/">Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/load-shedding/">Load Shedding</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/observability/">Observability</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/serverless/">Serverless Computing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../devops/versioning/">Versioning</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Machine Learning</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../machine-learning/algorithms/">Algorithms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../machine-learning/deep-learning/">Deep Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../machine-learning/fundamentals/">Fundamentals</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../machine-learning/input-data/">Input Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../machine-learning/responsibilities/">Responsibilities</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Programming</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/algorithm-complexity/">Algorithm Complexity</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/code-refactoring/">Code Refactoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/conventional-commits/">Conventional Commits</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/development-workflows/">Development Workflows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/django/">Django</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/fastapi/">FastApi</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/flask/">Flask</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/golang/">Golang</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/openapi/">OpenAPI Specification</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/python/">Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/sqlalchemy/">SQLAlchemy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../programming/virtualenvs/">Virtualenvs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Project Management</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/c4-model/">C4 Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/diagram-flows/">Diagram Flows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/product-owner/">Product Owner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/scrum/">SCRUM</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/tech-lead/">Technical Leader</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/user-stories/">User Stories</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/waterfall-methodology/">Waterfall Methodology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../project-management/work-remotely/">Work Remotely</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Utils</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/authorization/">Authorization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/cache/">Cache</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/db-table-indexes/">Database table indexes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/databases/">Databases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/ide/">IDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/proxy/">Proxy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/regex/">Regex</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/runbooks/">Runbooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/scaling/">Scaling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/task-runner/">Task runner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/testing/">Testing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/ubuntu/">Ubuntu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../utils/working-environment/">Working Environment</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">My technical wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Architecture</li>
          <li class="breadcrumb-item">Patterns</li>
      <li class="breadcrumb-item active">State Pattern</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="state-pattern">State pattern</h1>
<p>The State Pattern is a behavioral design pattern that allows an object to alter
its behavior when its internal state changes. The object will appear to change
its class at runtime, specially when yo have multiple conditional statements
that switch the object behavior based on its state. You can add new states to
your system without altering existing code.</p>
<h2 id="key-components">Key components</h2>
<ul>
<li><strong>Context</strong>: The object that has a current state, delegating all
  state-specific work to this object.</li>
<li><strong>State</strong>: interface defining the behavior associated with a particular state
  of the context.</li>
<li><strong>Concrete State</strong>: classes that implement the State interface, defining the
  behavior associated with a particular state of the context.</li>
</ul>
<h2 id="example">Example</h2>
<p>Let's consider a traffic light system with three states: <code>Red</code>, <code>Yellow</code>, and
<code>Green</code>.</p>
<pre><code class="language-python">from abc import ABC, abstractmethod

# State interface
class TrafficLightState(ABC):
    @abstractmethod
    def change(self):
        pass

# Concrete states
class RedLight(TrafficLightState):
    def change(self):
        return &quot;Yellow&quot;

class YellowLight(TrafficLightState):
    def change(self):
        return &quot;Green&quot;

class GreenLight(TrafficLightState):
    def change(self):
        return &quot;Red&quot;

# Context
class TrafficLight:
    def __init__(self):
        self.state = RedLight()

    def change(self):
        self.state = {
            RedLight: YellowLight(),
            YellowLight: GreenLight(),
            GreenLight: RedLight()
        }[type(self.state)]

    def current_state(self):
        return type(self.state).__name__

# Usage
traffic_light = TrafficLight()
print(traffic_light.current_state())  # Red
traffic_light.change()
print(traffic_light.current_state())  # Yellow
traffic_light.change()
print(traffic_light.current_state())  # Green
traffic_light.change()
print(traffic_light.current_state())  # Red
</code></pre>
<h2 id="advantages">Advantages</h2>
<ul>
<li><strong>Simplicity</strong>: It simplifies complex conditional statements by encapsulating
  state-specific behavior.</li>
<li><strong>Maintainability</strong>: Adding new states or modifying existing ones is easier
  without affecting other parts of the code.</li>
<li><strong>Readability</strong>: The code becomes more readable and self-explanatory as state
  transitions are clearly defined.</li>
<li><strong>Testing</strong>: Testing individual states becomes straightforward, enhancing the
  overall code quality.</li>
</ul>
<h2 id="use-cases">Use Cases</h2>
<ul>
<li>Document Editing</li>
<li>Traffic Light</li>
<li>Vending Machine</li>
<li>Booking System</li>
<li>eCommerce Checkout</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><a href="https://medium.com/@amirm.lavasani/design-patterns-in-python-state-8916b2f65f69">State Pattern in python</a></li>
<li><a href="https://github.com/pytransitions/transitions">Transitioning - python library</a></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../solid/" class="btn btn-neutral float-left" title="Solid Principles"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../vertical-slice/" class="btn btn-neutral float-right" title="Vertical Slice">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2025 <a href="https://github.com/McLargo">Javier Gil</a>.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../solid/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../vertical-slice/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
